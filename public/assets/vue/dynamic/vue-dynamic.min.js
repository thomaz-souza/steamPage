const VueDynamic=function(i){this.data=function(){return{dynamic:{items:i.data?i.data:[],options:i,error:!1,loading:!1,loaded:!!i.data},filters:i.filters?i.filters:{}}};let t=function(i){return"function"==typeof i};this.methods={_set:function(i){if(t(this.dynamic.options.onData)){let t=this.dynamic.options.onData(i);t&&(i=t)}if(t(this.dynamic.options.dataModel)&&(i=t(i.map)?i.map(i=>new this.dynamic.options.dataModel(i)):this.dynamic.options.dataModel(i)),this.dynamic.options.infiniteLoader){if(this.dynamic.options.skeletonLoad)for(let i=this.dynamic.items.length-1;i>=0&&this.dynamic.items[i]._skeleton;i--)this.dynamic.items.splice(i,1);this.dynamic.items=this.dynamic.items.concat(i)}else this.dynamic.items=i},_fakePopulate:function(){let i=[],t=!!this.hasPagination&&this.pagination,n=this.dynamic.options.fakeItems?this.dynamic.options.fakeItems:t?t.itemsPerPage:0;this.hasPagination&&t.size&&t.itemsPerPage*t.currentPage>t.size&&(n=t.size-t.itemsPerPage*(t.currentPage-1));for(var a=0;a<n;a++)i.push({_skeleton:!0});this._set(i)},reload:function(){return this.dynamic.items=[],this.pagination&&this.pagination.currentPage&&this.pagination.currentPage>1?this.pagination.currentPage=1:this.load(!0)},load:function(i){this.dynamic.loading=!0,this.dynamic.error=!1,this.dynamic.options.infiniteLoader&&!0===i&&(this.dynamic.items=[]),this.dynamic.options.skeletonLoad&&this._fakePopulate();let n=this.filters,a=this;this.hasPagination&&(n.pag=this.pagination.currentPage,n.prp=this.pagination.itemsPerPage),t(this.dynamic.options.source)?this.dynamic.options.source(n,function(i){if(a.dynamic.loading=!1,200!=i.status)return a.dynamic.loaded=!0,void(a.dynamic.error=i.error);let t=i.data;t.results?(t=i.data.results,delete i.data.results,a.pagination=Object.assign(a.pagination,i.data)):a.pagination={},a._set(t),a.dynamic.loaded=!0}):"string"==typeof this.dynamic.options.source&&request.run(this.dynamic.options.source,n,function(i){a.dynamic.loading=!1,a._set(i),a.dynamic.loaded=!0})},_filter:function(i,t){if(null!=t)return this.filters[i]=t;delete this.filters[i]},filter:function(i,t){let n=this;"array"==typeof i?i.forEach((i,t)=>n._filter(i,t)):this._filter(i,t),this.load(!0)},_order:function(i,t){this._filter("order",[i,t||"ASC"])},order:function(i,t){this._order(i,t),this.load(!0)}},this.watch={"pagination.currentPage":function(){this.load()},"pagination.itemsPerPage":function(){this.pagination.currentPage=1,this.load()}},this.computed={isLoading:function(){return this.dynamic.loading},hasError:function(){return!!this.dynamic.error},isEmpty:function(){return!this.isLoading&&!this.hasError&&this.dynamic.items&&0==this.dynamic.items.length},getData:function(){return this.dynamic.items?this.dynamic.items:[]},hasPagination:function(){return!(!this.pagination||!this.pagination.currentPage)}},i.components&&(this.components=i.components),i.el&&(this.el=i.el),i.mixins&&(this.mixins=i.mixins),this.mounted=function(){this.dynamic.loaded||this.load()}};